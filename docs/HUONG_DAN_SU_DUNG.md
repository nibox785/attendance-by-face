# HÆ¯á»šNG DáºªN Sá»¬ Dá»¤NG Há»† THá»NG ÄIá»‚M DANH

## ğŸ“š Tá»•ng quan

Há»‡ thá»‘ng sá»­ dá»¥ng **phÆ°Æ¡ng phÃ¡p Ä‘iá»ƒm danh theo buá»•i há»c (Session-Based Attendance)** Ä‘á»ƒ Ä‘áº£m báº£o:
- âœ… KhÃ´ng táº¡o báº£n ghi trÃ¹ng láº·p
- âœ… Dá»… dÃ ng chá»‰nh sá»­a vÃ  quáº£n lÃ½
- âœ… CÃ³ lá»‹ch sá»­ thay Ä‘á»•i chi tiáº¿t
- âœ… TÃ­nh Ä‘iá»ƒm tá»± Ä‘á»™ng vÃ  chÃ­nh xÃ¡c

---

## ğŸ‘¨â€ğŸ« HÆ¯á»šNG DáºªN CHO GIáº¢NG VIÃŠN

### BÆ°á»›c 1ï¸âƒ£: Báº¯t Ä‘áº§u Ä‘iá»ƒm danh

1. **ÄÄƒng nháº­p** vá»›i tÃ i khoáº£n giáº£ng viÃªn
2. VÃ o menu **"Quáº£n lÃ½ Ä‘iá»ƒm danh"**
3. TÃ¬m lá»›p há»c hÃ´m nay (chá»‰ hiá»‡n nÃºt cho Ä‘Ãºng thá»© há»c)
4. Click nÃºt xanh lÃ¡ **"Báº¯t Ä‘áº§u Ä‘iá»ƒm danh"**

**Há»‡ thá»‘ng tá»± Ä‘á»™ng:**
- âœ“ Táº¡o buá»•i há»c má»›i (ClassSession)
- âœ“ GÃ¡n táº¥t cáº£ sinh viÃªn lÃ  "Váº¯ng"
- âœ“ Má»Ÿ trang Ä‘iá»ƒm danh chi tiáº¿t

---

### BÆ°á»›c 2ï¸âƒ£: Chá»n phÆ°Æ¡ng thá»©c Ä‘iá»ƒm danh

Báº¡n cÃ³ **3 tÃ¹y chá»n**:

#### ğŸ–Šï¸ **PhÆ°Æ¡ng Ã¡n A: Äiá»ƒm danh thá»§ cÃ´ng**

**Khi nÃ o dÃ¹ng?**
- Sinh viÃªn Ã­t (< 10 ngÆ°á»i)
- KhÃ´ng cÃ³ camera
- Muá»‘n kiá»ƒm soÃ¡t chÃ­nh xÃ¡c tá»«ng ngÆ°á»i

**CÃ¡ch thá»±c hiá»‡n:**
1. NhÃ¬n vÃ o báº£ng danh sÃ¡ch sinh viÃªn
2. á» cá»™t **"Tráº¡ng thÃ¡i"**, má»—i sinh viÃªn cÃ³ dropdown menu:
   - ğŸ”´ **Váº¯ng** (Absent) - 0 Ä‘iá»ƒm
   - ğŸŸ¢ **CÃ³ máº·t** (Present) - 1 Ä‘iá»ƒm  
   - ğŸŸ¡ **Muá»™n** (Late) - 0.5 Ä‘iá»ƒm
3. Chá»n tráº¡ng thÃ¡i cho tá»«ng sinh viÃªn
4. Click nÃºt **"LÆ°u thay Ä‘á»•i"** á»Ÿ cuá»‘i trang
5. Há»‡ thá»‘ng hiá»ƒn thá»‹ thÃ´ng bÃ¡o: "âœ“ Cáº­p nháº­t X báº£n ghi Ä‘iá»ƒm danh thÃ nh cÃ´ng!"

**MÃ u sáº¯c báº£ng:**
- ğŸ”´ Äá» = Váº¯ng
- ğŸŸ¢ Xanh lÃ¡ = CÃ³ máº·t
- ğŸŸ¡ VÃ ng = Muá»™n

---

#### ğŸ“¸ **PhÆ°Æ¡ng Ã¡n B: Äiá»ƒm danh báº±ng khuÃ´n máº·t**

**Khi nÃ o dÃ¹ng?**
- Sinh viÃªn nhiá»u (> 10 ngÆ°á»i)
- CÃ³ camera
- Muá»‘n nhanh vÃ  chá»‘ng gian láº­n

**CÃ¡ch thá»±c hiá»‡n:**
1. Click nÃºt xanh dÆ°Æ¡ng **"Äiá»ƒm danh báº±ng khuÃ´n máº·t"**
2. Cho phÃ©p trÃ¬nh duyá»‡t truy cáº­p camera
3. YÃªu cáº§u sinh viÃªn láº§n lÆ°á»£t Ä‘á»©ng trÆ°á»›c camera (1 ngÆ°á»i/láº§n)
4. Há»‡ thá»‘ng tá»± Ä‘á»™ng:
   - PhÃ¡t hiá»‡n khuÃ´n máº·t (khung xanh)
   - Kiá»ƒm tra chá»‘ng giáº£ máº¡o (anti-spoofing)
   - Nháº­n diá»‡n ngÆ°á»i (hiá»ƒn thá»‹ tÃªn)
   - Thanh progress bar cháº¡y Ä‘áº¿n 100%
   - Cáº­p nháº­t Ä‘iá»ƒm danh tá»± Ä‘á»™ng
   - Hiá»ƒn thá»‹ "âœ“ Äiá»ƒm danh thÃ nh cÃ´ng: [TÃªn sinh viÃªn]"

**LÆ°u Ã½:**
- âš¡ Tá»‘c Ä‘á»™: ~1.5 giÃ¢y/sinh viÃªn (Ä‘Ã£ tá»‘i Æ°u)
- ğŸ›¡ï¸ Chá»‘ng fake: KhÃ´ng nháº­n diá»‡n áº£nh in, video tá»« mÃ n hÃ¬nh
- ğŸ¯ Äá»™ chÃ­nh xÃ¡c: 85%+ (threshold Ä‘Ã£ giáº£m Ä‘á»ƒ nhanh hÆ¡n)
- â±ï¸ Tá»± Ä‘á»™ng tÃ­nh "Muá»™n" náº¿u check-in sau 15 phÃºt
- ğŸ”„ Náº¿u Ä‘Ã£ Ä‘iá»ƒm danh rá»“i, hiá»ƒn thá»‹ khung Ä‘á»: "Ä‘Ã£ Ä‘iá»ƒm danh"

**Náº¿u khÃ´ng nháº­n diá»‡n Ä‘Æ°á»£c:**
- Sinh viÃªn Ä‘á»©ng gáº§n camera hÆ¡n
- Ãnh sÃ¡ng Ä‘á»§ sÃ¡ng
- NhÃ¬n tháº³ng vÃ o camera
- Hoáº·c dÃ¹ng Ä‘iá»ƒm danh thá»§ cÃ´ng

---

#### ğŸ”€ **PhÆ°Æ¡ng Ã¡n C: Káº¿t há»£p cáº£ 2**

**Quy trÃ¬nh Ä‘á» xuáº¥t:**
1. DÃ¹ng **camera** Ä‘iá»ƒm danh hÃ ng loáº¡t trÆ°á»›c (90% sinh viÃªn)
2. Quay láº¡i **thá»§ cÃ´ng** Ä‘á»ƒ:
   - Sá»­a sai sÃ³t (náº¿u cÃ³)
   - Äiá»ƒm danh cho SV khÃ´ng nháº­n diá»‡n Ä‘Æ°á»£c
   - Äiá»ƒm danh cho SV Ä‘áº¿n muá»™n sau khi Ä‘Ã³ng camera

---

### BÆ°á»›c 3ï¸âƒ£: ÄÃ³ng buá»•i Ä‘iá»ƒm danh

1. Sau khi Ä‘iá»ƒm danh xong, click nÃºt Ä‘á» **"ÄÃ³ng buá»•i Ä‘iá»ƒm danh"**
2. Há»‡ thá»‘ng hiá»ƒn thá»‹ thá»‘ng kÃª:
   ```
   âœ“ ÄÃ£ Ä‘Ã³ng buá»•i #3 - Láº­p trÃ¬nh Python
   CÃ³ máº·t: 28/30 | Váº¯ng: 2
   ```
3. Tráº¡ng thÃ¡i chuyá»ƒn tá»« **OPEN** â†’ **CLOSED**

**Sau khi Ä‘Ã³ng:**
- âœ… Dá»¯ liá»‡u Ä‘Æ°á»£c lÆ°u an toÃ n
- âœ… KhÃ´ng thá»ƒ sá»­a trá»±c tiáº¿p (pháº£i má»Ÿ láº¡i)
- âœ… TÃ­nh vÃ o Ä‘iá»ƒm chuyÃªn cáº§n

---

### BÆ°á»›c 4ï¸âƒ£: Xem vÃ  sá»­a láº¡i (náº¿u cáº§n)

**Xem lá»‹ch sá»­:**
1. Click **"Lá»‹ch sá»­ Ä‘iá»ƒm danh"** á»Ÿ gÃ³c pháº£i trang chÃ­nh
2. Xem táº¥t cáº£ buá»•i há»c Ä‘Ã£ diá»…n ra (má»›i nháº¥t á»Ÿ trÃªn)
3. Má»—i buá»•i hiá»ƒn thá»‹:
   - TÃªn lá»›p, ngÃ y, buá»•i sá»‘ máº¥y
   - Tráº¡ng thÃ¡i: OPEN (xanh) / CLOSED (xÃ¡m)
   - Tá»· lá»‡ cÃ³ máº·t (%)
   - Sá»‘ lÆ°á»£ng: Tá»•ng/CÃ³ máº·t/Váº¯ng

**Má»Ÿ láº¡i Ä‘á»ƒ sá»­a:**
1. TÃ¬m buá»•i cáº§n sá»­a (tráº¡ng thÃ¡i CLOSED)
2. Click nÃºt vÃ ng **"Má»Ÿ láº¡i Ä‘á»ƒ chá»‰nh sá»­a"**
3. XÃ¡c nháº­n: "Báº¡n cÃ³ cháº¯c muá»‘n má»Ÿ láº¡i buá»•i Ä‘iá»ƒm danh Ä‘á»ƒ chá»‰nh sá»­a?"
4. Buá»•i há»c chuyá»ƒn vá» OPEN
5. Sá»­a Ä‘iá»ƒm danh (thá»§ cÃ´ng hoáº·c camera)
6. Click **"LÆ°u thay Ä‘á»•i"**
7. Click **"ÄÃ³ng buá»•i Ä‘iá»ƒm danh"** láº¡i

**LÆ°u Ã½:**
- ğŸ” Chá»‰ giáº£ng viÃªn dáº¡y lá»›p Ä‘Ã³ má»›i Ä‘Æ°á»£c má»Ÿ láº¡i
- ğŸ“ Má»i thay Ä‘á»•i Ä‘á»u Ä‘Æ°á»£c ghi log (ai sá»­a, lÃºc nÃ o)
- âš ï¸ NÃªn sá»­a trong ngÃ y Ä‘á»ƒ trÃ¡nh quÃªn

---

## ğŸ“ HÆ¯á»šNG DáºªN CHO SINH VIÃŠN

### Xem Ä‘iá»ƒm chuyÃªn cáº§n

1. **ÄÄƒng nháº­p** vá»›i tÃ i khoáº£n sinh viÃªn
2. VÃ o menu **"TÃ¬nh Ä‘iá»ƒm chuyÃªn cáº§n"**
3. Chá»n lá»›p há»c muá»‘n xem
4. Há»‡ thá»‘ng hiá»ƒn thá»‹:
   - Tá»•ng sá»‘ buá»•i há»c
   - Sá»‘ buá»•i: CÃ³ máº·t / Muá»™n / Váº¯ng
   - Äiá»ƒm chuyÃªn cáº§n (thang 3 Ä‘iá»ƒm)
   - Cáº£nh bÃ¡o náº¿u váº¯ng quÃ¡ 20%

### CÃ´ng thá»©c tÃ­nh Ä‘iá»ƒm

```
Äiá»ƒm = ((CÃ³ máº·t Ã— 1) + (Muá»™n Ã— 0.5) + (Váº¯ng Ã— 0)) / Tá»•ng buá»•i Ã— 3
```

**VÃ­ dá»¥:**
- Tá»•ng buá»•i: 10
- CÃ³ máº·t: 7 buá»•i â†’ 7 Ä‘iá»ƒm
- Muá»™n: 2 buá»•i â†’ 1 Ä‘iá»ƒm
- Váº¯ng: 1 buá»•i â†’ 0 Ä‘iá»ƒm
- **Äiá»ƒm = (7 + 1 + 0) / 10 Ã— 3 = 2.4/3**

**Quy Ä‘á»‹nh:**
- âš ï¸ Váº¯ng > 20% tá»•ng buá»•i â†’ **Cáº¥m thi**
- VÃ­ dá»¥: 10 buá»•i â†’ váº¯ng tá»‘i Ä‘a 2 buá»•i

---

## â“ CÃ‚U Há»I THÆ¯á»œNG Gáº¶P

### Q1: Táº¡i sao khÃ´ng tháº¥y nÃºt "Báº¯t Ä‘áº§u Ä‘iá»ƒm danh"?
**A:** NÃºt chá»‰ hiá»‡n khi:
- âœ… HÃ´m nay lÃ  Ä‘Ãºng thá»© há»c cá»§a lá»›p
- âœ… Báº¡n lÃ  giáº£ng viÃªn cá»§a lá»›p Ä‘Ã³
- âœ… Lá»›p Ä‘ang trong ká»³ há»c

### Q2: Äiá»ƒm danh xong rá»“i nhÆ°ng muá»‘n sá»­a?
**A:** CÃ³ 2 cÃ¡ch:
1. **Náº¿u chÆ°a Ä‘Ã³ng**: Sá»­a trá»±c tiáº¿p vÃ  click "LÆ°u thay Ä‘á»•i"
2. **Náº¿u Ä‘Ã£ Ä‘Ã³ng**: VÃ o "Lá»‹ch sá»­ Ä‘iá»ƒm danh" â†’ Click "Má»Ÿ láº¡i" â†’ Sá»­a â†’ ÄÃ³ng láº¡i

### Q3: Camera khÃ´ng nháº­n diá»‡n Ä‘Æ°á»£c sinh viÃªn?
**A:** Thá»­:
- Kiá»ƒm tra Ã¡nh sÃ¡ng (cáº§n Ä‘á»§ sÃ¡ng)
- Sinh viÃªn Ä‘á»©ng gáº§n camera hÆ¡n
- NhÃ¬n tháº³ng vÃ o camera
- Náº¿u váº«n khÃ´ng Ä‘Æ°á»£c â†’ DÃ¹ng Ä‘iá»ƒm danh thá»§ cÃ´ng

### Q4: Sinh viÃªn Ä‘Ã£ Ä‘iá»ƒm danh nhÆ°ng hiá»‡n "Váº¯ng"?
**A:** 
- VÃ o trang Ä‘iá»ƒm danh
- TÃ¬m sinh viÃªn trong báº£ng
- Sá»­a tá»« "Váº¯ng" â†’ "CÃ³ máº·t"
- Click "LÆ°u thay Ä‘á»•i"

### Q5: LÃ m sao biáº¿t ai sá»­a Ä‘iá»ƒm danh?
**A:** Há»‡ thá»‘ng tá»± Ä‘á»™ng lÆ°u:
- `modified_by`: NgÆ°á»i sá»­a cuá»‘i
- `modified_at`: Thá»i gian sá»­a
- `check_in_method`: MANUAL hay FACE
â†’ Admin cÃ³ thá»ƒ truy váº¥n database Ä‘á»ƒ xem lá»‹ch sá»­

### Q6: QuÃªn khÃ´ng Ä‘Ã³ng buá»•i Ä‘iá»ƒm danh?
**A:** KhÃ´ng sao! Buá»•i há»c váº«n lÆ°u vá»›i tráº¡ng thÃ¡i OPEN. Báº¡n cÃ³ thá»ƒ:
- VÃ o "Lá»‹ch sá»­ Ä‘iá»ƒm danh"
- TÃ¬m buá»•i Ä‘Ã³
- Click "ÄÃ³ng buá»•i Ä‘iá»ƒm danh"

### Q7: Muá»‘n xÃ³a má»™t buá»•i Ä‘iá»ƒm danh?
**A:** Hiá»‡n táº¡i chÆ°a cÃ³ chá»©c nÄƒng xÃ³a trá»±c tiáº¿p (Ä‘á»ƒ báº£o vá»‡ dá»¯ liá»‡u). 
Náº¿u cáº§n:
- LiÃªn há»‡ Admin
- Admin cÃ³ thá»ƒ xÃ³a qua Django Admin Panel

---

## ğŸ”§ Xá»¬ LÃ Sá»° Cá»

### TrÆ°á»ng há»£p 1: Máº¥t Ä‘iá»‡n giá»¯a buá»•i Ä‘iá»ƒm danh
- âœ… Dá»¯ liá»‡u Ä‘Ã£ lÆ°u váº«n giá»¯ nguyÃªn
- âœ… Buá»•i há»c váº«n á»Ÿ tráº¡ng thÃ¡i OPEN
- âœ… VÃ o láº¡i tiáº¿p tá»¥c Ä‘iá»ƒm danh bÃ¬nh thÆ°á»ng

### TrÆ°á»ng há»£p 2: Camera bá»‹ lá»—i
- âœ… Chuyá»ƒn sang Ä‘iá»ƒm danh thá»§ cÃ´ng
- âœ… CÃ³ thá»ƒ káº¿t há»£p: Camera trÆ°á»›c â†’ Thá»§ cÃ´ng sau

### TrÆ°á»ng há»£p 3: Sinh viÃªn khiáº¿u náº¡i Ä‘iá»ƒm sai
- âœ… Giáº£ng viÃªn má»Ÿ láº¡i buá»•i Ä‘Ã³
- âœ… Kiá»ƒm tra vÃ  sá»­a
- âœ… LÆ°u láº¡i vá»›i ghi chÃº (náº¿u cáº§n)

---

## ğŸ“Š BÃO CÃO VÃ€ THá»NG KÃŠ

### Xem Ä‘iá»ƒm cá»§a cáº£ lá»›p
1. VÃ o **"TÃ­nh Ä‘iá»ƒm chuyÃªn cáº§n"**
2. Chá»n lá»›p há»c
3. Xem báº£ng Ä‘iá»ƒm tá»•ng há»£p:
   - MÃ£ SV, TÃªn, Email
   - Sá»‘ buá»•i: Váº¯ng/Muá»™n/CÃ³ máº·t
   - Äiá»ƒm chuyÃªn cáº§n
   - Cáº£nh bÃ¡o vÆ°á»£t giá»›i háº¡n váº¯ng

### Export dá»¯ liá»‡u (Admin)
- VÃ o Django Admin Panel
- Chá»n báº£ng Attendance
- Click "Export" â†’ CSV/Excel

---

## ğŸ¯ TIPS & TRICKS

### Cho giáº£ng viÃªn:
1. **Äiá»ƒm danh Ä‘áº§u giá»**: Má»Ÿ buá»•i há»c ngay khi báº¯t Ä‘áº§u lá»›p
2. **Káº¿t há»£p phÆ°Æ¡ng phÃ¡p**: Camera cho sá»‘ Ä‘Ã´ng â†’ Thá»§ cÃ´ng cho trÆ°á»ng há»£p Ä‘áº·c biá»‡t
3. **ÄÃ³ng buá»•i cuá»‘i giá»**: ÄÃ³ng ngay khi káº¿t thÃºc Ä‘á»ƒ trÃ¡nh quÃªn
4. **Kiá»ƒm tra Ä‘á»‹nh ká»³**: Xem "Lá»‹ch sá»­ Ä‘iá»ƒm danh" má»—i tuáº§n Ä‘á»ƒ phÃ¡t hiá»‡n sai sÃ³t

### Cho sinh viÃªn:
1. **Äáº¿n Ä‘Ãºng giá»**: TrÃ¡nh bá»‹ tÃ­nh "Muá»™n" (máº¥t 0.5 Ä‘iá»ƒm)
2. **Kiá»ƒm tra Ä‘iá»ƒm thÆ°á»ng xuyÃªn**: VÃ o xem Ä‘iá»ƒm sau má»—i buá»•i há»c
3. **BÃ¡o ngay náº¿u sai**: Giáº£ng viÃªn cÃ³ thá»ƒ sá»­a trong vÃ i ngÃ y
4. **ÄÄƒng kÃ½ khuÃ´n máº·t**: Äá»ƒ nháº­n diá»‡n nhanh vÃ  chÃ­nh xÃ¡c

---

## ğŸš€ Tá»I Æ¯U HÃ“A Má»šI NHáº¤T

### Version hiá»‡n táº¡i Ä‘Ã£ cáº£i thiá»‡n:
- âš¡ **Tá»‘c Ä‘á»™ nháº­n diá»‡n**: Nhanh gáº¥p 2 láº§n (30 frames â†’ 15 frames)
- ğŸ¯ **Äá»™ chÃ­nh xÃ¡c**: CÃ¢n báº±ng tá»‘c Ä‘á»™/cháº¥t lÆ°á»£ng (90% â†’ 85%)
- ğŸ“¹ **Xá»­ lÃ½ video**: TÄƒng FPS, giáº£m Ä‘á»™ trá»…
- ğŸ›¡ï¸ **Anti-spoofing**: Chá»‰ dÃ¹ng 1 model tá»‘t nháº¥t (nhanh 3x)
- ğŸ’¾ **LÆ°u dá»¯ liá»‡u**: KhÃ´ng cÃ²n táº¡o báº£n ghi trÃ¹ng láº·p

### So sÃ¡nh trÆ°á»›c/sau:
| Chá»‰ sá»‘ | TrÆ°á»›c | Sau | Cáº£i thiá»‡n |
|--------|-------|-----|-----------|
| Thá»i gian nháº­n diá»‡n | 3 giÃ¢y | 1.5 giÃ¢y | **50% nhanh hÆ¡n** |
| Báº£n ghi trÃ¹ng láº·p | NÃ—M records | 1 record/SV | **100% giáº£m** |
| Kháº£ nÄƒng sá»­a | KhÃ´ng | CÃ³ (reopen) | **Linh hoáº¡t 100%** |
| Lá»‹ch sá»­ thay Ä‘á»•i | KhÃ´ng | CÃ³ (audit trail) | **Minh báº¡ch 100%** |

---

## ğŸ“ Há»– TRá»¢

Náº¿u gáº·p váº¥n Ä‘á»:
1. Äá»c láº¡i hÆ°á»›ng dáº«n nÃ y
2. Kiá»ƒm tra FAQ á»Ÿ trÃªn
3. LiÃªn há»‡ Admin há»‡ thá»‘ng
4. BÃ¡o lá»—i qua GitHub Issues

---

**Cáº­p nháº­t láº§n cuá»‘i:** 10/12/2025  
**Version:** 2.0 (Session-Based Attendance)
